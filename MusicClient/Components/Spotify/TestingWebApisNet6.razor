@using MCGlobals = MusicClient.Globals
@using WebApis.Net6
@using WApiGlobals = WebApis.Net6.Globals
@using WApiSpotifyGlobals = WebApis.Net6.Spotify.Globals
@using WApiUserProfile = WebApis.Net6.Spotify.WebApiEndpoints.WApiUserProfile
@using WebApis.Net6.Spotify.Models

<h3>TestingWebApisNet6</h3>
@if(userProfile is not null)
{
    <span>@userProfile.DisplayName</span><br />
    <span>@userProfile.Email</span><br />
    <span>@userProfile.Id</span>
}

@code {
    UserProfile? userProfile;
    Paged<Track>? userTopTracks;

    protected override async Task OnInitializedAsync()
    {
        WApiSpotifyGlobals.AccessToken = MCGlobals.SpotifyAccessToken?.AccessToken;

        userProfile = await WApiUserProfile.GetCurrentUsersProfile();

        //jkdesxdxvu6uetjdnaro2yrfc
        await WApiUserProfile.PutFollowArtistsOrUsers(WApiSpotifyGlobals.ArtistOrUser.artist, 
            new string[] { "2CIMQHirSU0MQqyYHq0eOx" });

        userTopTracks = await WApiUserProfile.GetUsersTopTracks();

        await base.OnInitializedAsync();
    }
}
